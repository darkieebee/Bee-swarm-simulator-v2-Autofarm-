local Workspace = game:GetService("Workspace")
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local CoreGui = game:GetService("CoreGui")
local VirtualInputManager = game:GetService("VirtualInputManager")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local GuiService = game:GetService("GuiService")

local Player = Players.LocalPlayer
local Character = Player.Character or Player.CharacterAdded:Wait()
local HRP = Character:WaitForChild("HumanoidRootPart")
local Humanoid = Character:WaitForChild("Humanoid")

local toolCollect = ReplicatedStorage.Events.ToolCollect
local claimHive = ReplicatedStorage.Events.ClaimHive
local playerHiveCmd = ReplicatedStorage.Events.PlayerHiveCommand
local Hives = Workspace:WaitForChild("Honeycombs")
local coreStats = Player:WaitForChild("CoreStats")

local flowerFields = {}
for _, v in pairs(Workspace.FlowerZones:GetChildren()) do
    table.insert(flowerFields, v.Name)
end

local autofarmField = flowerFields[1] or "Sunflower Field"
local autofarmVar = false
local autoTool = false
local autoFarmRadius = 35
local playerHive = nil
local currentField = nil

local afkConnection = nil

local function enableAntiAFK()
    if afkConnection then
        afkConnection:Disconnect()
        afkConnection = nil
    end
    
    afkConnection = Player.Idled:Connect(function()
        VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.Space, false, game)
        task.wait(0.1)
        VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.Space, false, game)
    end)
end
enableAntiAFK()

local function getPlayerHive()
    for _, Hive in pairs(Hives:GetChildren()) do
        if tostring(Hive.Owner.Value) == tostring(Player.Name) then
            return Hive
        end
    end
    for _, Hive in pairs(Hives:GetChildren()) do
        if Hive.Owner.Value == nil then
            HRP.CFrame = Hive.SpawnPos.Value + Vector3.new(0, 3, 0)
            task.wait(1)
            claimHive:FireServer(Hive.HiveID.Value)
            break
        end
    end
    task.wait(2)
    return getPlayerHive()
end
playerHive = getPlayerHive()

local function randomPoint(radius, cf)
    local p = cf.Position
    local x = math.random(p.X - radius, p.X + radius)
    local z = math.random(p.Z - radius, p.Z + radius)
    local ray = Workspace:Raycast(Vector3.new(x, p.Y + 200, z), Vector3.new(0, -400, 0))
    if ray then
        return ray.Position + Vector3.new(0, 3, 0)
    end
    return Vector3.new(x, p.Y, z)
end

local function convert()
    if coreStats.Pollen.Value == 0 then return end
    local currentPos = HRP.Position
    HRP.CFrame = playerHive.SpawnPos.Value + Vector3.new(0, 3, 0)
    task.wait(1)
    playerHiveCmd:FireServer("ToggleHoneyMaking")
    local t = 0
    repeat task.wait(1) t = t + 1 until coreStats.Pollen.Value == 0 or t > 60
    task.wait(6)
    if currentField then
        HRP.CFrame = currentField.CFrame + Vector3.new(0, 5, 0)
    end
end

local function onCharacterAdded(newCharacter)
    Character = newCharacter
    HRP = Character:WaitForChild("HumanoidRootPart")
    Humanoid = Character:WaitForChild("Humanoid")
    task.wait(3)
    if autofarmVar and currentField then
        HRP.CFrame = currentField.CFrame + Vector3.new(0, 5, 0)
    end
end
Player.CharacterAdded:Connect(onCharacterAdded)

local function farm()
    autofarmVar = true
    autoTool = true
    local field = Workspace.FlowerZones:FindFirstChild(autofarmField)
    if not field then
        print("Error: Field '" .. autofarmField .. "' not found!")
        autofarmVar = false
        autoTool = false
        return
    end
    
    currentField = field
    
    while autofarmVar do
        HRP.CFrame = field.CFrame + Vector3.new(0, 5, 0)
        task.wait(0.2)
        
        local cap = coreStats.Capacity.Value
        
        repeat
            local pos = randomPoint(autoFarmRadius, field.CFrame)
            Humanoid:MoveTo(pos)
            local waitTime = 0
            repeat 
                task.wait() 
                waitTime = waitTime + 0.1
                if coreStats.Pollen.Value >= cap then
                    break
                end
            until (HRP.Position - pos).Magnitude < 5 or waitTime > 10
            
            if coreStats.Pollen.Value >= cap then
                convert()
                HRP.CFrame = field.CFrame + Vector3.new(0, 5, 0)
                task.wait(0.2)
            end
            
        until coreStats.Pollen.Value >= cap or not autofarmVar
        
        if coreStats.Pollen.Value >= cap then
            convert()
        end
    end
end

task.spawn(function()
    while true do
        if autoTool then
            pcall(function() toolCollect:FireServer() end)
        end
        task.wait()
    end
end)

if CoreGui:FindFirstChild("BSSAutoFarmUI") then
    CoreGui.BSSAutoFarmUI:Destroy()
end

local sg = Instance.new("ScreenGui")
sg.Name = "BSSAutoFarmUI"
sg.ResetOnSpawn = false
sg.Parent = CoreGui
sg.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local C_DARK_BG = Color3.fromRGB(27, 27, 30)
local C_PRIMARY_BG = Color3.fromRGB(40, 40, 45)
local C_SECONDARY_BG = Color3.fromRGB(55, 55, 60)
local C_ACCENT = Color3.fromRGB(122, 66, 244)
local C_ACCENT_LIGHT = Color3.fromRGB(150, 100, 255)
local C_TEXT_LIGHT = Color3.fromRGB(240, 240, 240)
local C_TEXT_DIM = Color3.fromRGB(170, 170, 180)
local C_RED = Color3.fromRGB(200, 50, 50)
local C_GREEN = Color3.fromRGB(50, 200, 50)
local C_SEPARATOR = Color3.fromRGB(70, 70, 75)

local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 500, 0, 320)
mainFrame.Position = UDim2.new(0.5, -250, 0.5, -160)
mainFrame.BackgroundColor3 = C_DARK_BG
mainFrame.BackgroundTransparency = 0.01 
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.ZIndex = 2
mainFrame.Parent = sg

local mainUc = Instance.new("UICorner")
mainUc.CornerRadius = UDim.new(0, 12)
mainUc.Parent = mainFrame

local mainUs = Instance.new("UIStroke")
mainUs.Color = Color3.fromRGB(60, 60, 65)
mainUs.Thickness = 2
mainUs.Parent = mainFrame

local header = Instance.new("Frame")
header.Name = "Header"
header.Size = UDim2.new(1, 0, 0, 40)
header.BackgroundColor3 = C_PRIMARY_BG
header.BackgroundTransparency = 0.01
header.Parent = mainFrame

local headerUc = Instance.new("UICorner")
headerUc.CornerRadius = UDim.new(0, 12)
headerUc.Parent = header

local headerPadd = Instance.new("UIPadding")
headerPadd.PaddingLeft = UDim.new(0, 15)
headerPadd.PaddingRight = UDim.new(0, 10)
headerPadd.Parent = header

local titleLabel = Instance.new("TextLabel")
titleLabel.Name = "Title"
titleLabel.Size = UDim2.new(0.7, 0, 1, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Font = Enum.Font.GothamBlack
titleLabel.Text = "BSS AUTO FARM"
titleLabel.TextColor3 = C_TEXT_LIGHT
titleLabel.TextSize = 18
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.Parent = header

local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Name = "MinimizeBtn"
minimizeBtn.Size = UDim2.new(0, 25, 0, 25)
minimizeBtn.Position = UDim2.new(1, -60, 0.5, -12.5)
minimizeBtn.BackgroundColor3 = C_SECONDARY_BG
minimizeBtn.BackgroundTransparency = 0.01
minimizeBtn.Font = Enum.Font.GothamBold
minimizeBtn.Text = "−"
minimizeBtn.TextColor3 = C_TEXT_DIM
minimizeBtn.TextSize = 20
minimizeBtn.Parent = header

local minUc = Instance.new("UICorner")
minUc.CornerRadius = UDim.new(0, 6)
minUc.Parent = minimizeBtn

local closeBtn = Instance.new("TextButton")
closeBtn.Name = "CloseBtn"
closeBtn.Size = UDim2.new(0, 25, 0, 25)
closeBtn.Position = UDim2.new(1, -30, 0.5, -12.5)
closeBtn.BackgroundColor3 = C_RED
closeBtn.BackgroundTransparency = 0.01
closeBtn.Font = Enum.Font.GothamBold
closeBtn.Text = "X"
closeBtn.TextColor3 = C_TEXT_LIGHT
closeBtn.TextSize = 14
closeBtn.Parent = header

local closeUc = Instance.new("UICorner")
closeUc.CornerRadius = UDim.new(0, 6)
closeUc.Parent = closeBtn

local contentWrapper = Instance.new("Frame")
contentWrapper.Name = "ContentWrapper"
contentWrapper.Size = UDim2.new(1, 0, 1, -40)
contentWrapper.Position = UDim2.new(0, 0, 0, 40)
contentWrapper.BackgroundTransparency = 1
contentWrapper.Parent = mainFrame

local tabContainer = Instance.new("Frame")
tabContainer.Name = "TabContainer"
tabContainer.Size = UDim2.new(0, 120, 1, 0)
tabContainer.BackgroundColor3 = C_PRIMARY_BG
tabContainer.BackgroundTransparency = 0.01
tabContainer.Parent = contentWrapper

local tabLayout = Instance.new("UIListLayout")
tabLayout.Padding = UDim.new(0, 10)
tabLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
tabLayout.SortOrder = Enum.SortOrder.LayoutOrder
tabLayout.Parent = tabContainer

local tabPadd = Instance.new("UIPadding")
tabPadd.PaddingTop = UDim.new(0, 15)
tabPadd.Parent = tabContainer

local pageContainer = Instance.new("Frame")
pageContainer.Name = "PageContainer"
pageContainer.Size = UDim2.new(1, -120, 1, 0)
pageContainer.Position = UDim2.new(0, 120, 0, 0)
pageContainer.BackgroundTransparency = 1 
pageContainer.ClipsDescendants = false 
pageContainer.Parent = contentWrapper

local pagePadd = Instance.new("UIPadding")
pagePadd.PaddingTop = UDim.new(0, 15)
pagePadd.PaddingBottom = UDim.new(0, 15)
pagePadd.PaddingLeft = UDim.new(0, 20)
pagePadd.PaddingRight = UDim.new(0, 20)
pagePadd.Parent = pageContainer

local allTabButtons = {}
local allPages = {}

local function createTabButton(name)
    local btn = Instance.new("TextButton")
    btn.Name = name .. "Tab"
    btn.Size = UDim2.new(1, -20, 0, 40)
    btn.BackgroundColor3 = C_PRIMARY_BG 
    btn.BackgroundTransparency = 0.01
    btn.Font = Enum.Font.GothamBold
    btn.Text = string.upper(name)
    btn.TextColor3 = C_TEXT_DIM
    btn.TextSize = 16
    btn.Parent = tabContainer
    
    local uc = Instance.new("UICorner")
    uc.CornerRadius = UDim.new(0, 8)
    uc.Parent = btn
    
    table.insert(allTabButtons, btn)
    return btn
end

local function createPage()
    local page = Instance.new("Frame")
    page.Size = UDim2.new(1, 0, 1, 0)
    page.BackgroundTransparency = 1 
    page.Visible = false 
    page.Parent = pageContainer
    
    local pageListLayout = Instance.new("UIListLayout")
    pageListLayout.Padding = UDim.new(0, 10) 
    pageListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    pageListLayout.Parent = page
    
    table.insert(allPages, page)
    return page
end

local function switchTab(selectedBtn)
    for _, btn in pairs(allTabButtons) do
        btn.BackgroundColor3 = C_PRIMARY_BG
        btn.TextColor3 = C_TEXT_DIM
    end
    for _, page in pairs(allPages) do
        page.Visible = false
    end
    
    selectedBtn.BackgroundColor3 = C_ACCENT
    selectedBtn.TextColor3 = C_TEXT_LIGHT
    local pageName = selectedBtn.Name:gsub("Tab", "Page")
    local page = pageContainer:FindFirstChild(pageName)
    if page then
        page.Visible = true
    end
end

local page1_Farm = createPage()
page1_Farm.Name = "FarmPage"
local tab1_Farm = createTabButton("Farm")
tab1_Farm.BackgroundColor3 = C_ACCENT
tab1_Farm.TextColor3 = C_TEXT_LIGHT
page1_Farm.Visible = true

local mainStartBtn = Instance.new("TextButton")
mainStartBtn.Name = "MainStartBtn"
mainStartBtn.Size = UDim2.new(1, 0, 0, 45)
mainStartBtn.BackgroundColor3 = C_ACCENT
mainStartBtn.BackgroundTransparency = 0.01
mainStartBtn.Font = Enum.Font.GothamBlack
mainStartBtn.Text = "START FARMING"
mainStartBtn.TextColor3 = C_TEXT_LIGHT
mainStartBtn.TextSize = 18
mainStartBtn.Parent = page1_Farm

local startUc = Instance.new("UICorner")
startUc.CornerRadius = UDim.new(0, 8)
startUc.Parent = mainStartBtn

local statusGroup = Instance.new("Frame")
statusGroup.Name = "StatusGroup"
statusGroup.Size = UDim2.new(1, 0, 0, 75)
statusGroup.BackgroundColor3 = C_SECONDARY_BG
statusGroup.BackgroundTransparency = 0.01
statusGroup.Parent = page1_Farm

local statusGroupUc = Instance.new("UICorner")
statusGroupUc.CornerRadius = UDim.new(0, 8)
statusGroupUc.Parent = statusGroup

local statusGroupPadd = Instance.new("UIPadding")
statusGroupPadd.PaddingTop = UDim.new(0, 8)
statusGroupPadd.PaddingBottom = UDim.new(0, 8)
statusGroupPadd.PaddingLeft = UDim.new(0, 10)
statusGroupPadd.PaddingRight = UDim.new(0, 10)
statusGroupPadd.Parent = statusGroup

local statusGroupLayout = Instance.new("UIListLayout")
statusGroupLayout.Padding = UDim.new(0, 5)
statusGroupLayout.SortOrder = Enum.SortOrder.LayoutOrder
statusGroupLayout.Parent = statusGroup

local statusFrame = Instance.new("Frame")
statusFrame.Size = UDim2.new(1, 0, 0, 20)
statusFrame.BackgroundTransparency = 1
statusFrame.Parent = statusGroup

local statusTitle = Instance.new("TextLabel")
statusTitle.Size = UDim2.new(0.3, 0, 1, 0)
statusTitle.BackgroundTransparency = 1
statusTitle.Font = Enum.Font.GothamBold
statusTitle.Text = "STATUS:"
statusTitle.TextColor3 = C_TEXT_DIM
statusTitle.TextSize = 14
statusTitle.TextXAlignment = Enum.TextXAlignment.Left
statusTitle.Parent = statusFrame

local statusValue = Instance.new("TextLabel")
statusValue.Name = "StatusValue"
statusValue.Size = UDim2.new(0.7, 0, 1, 0)
statusValue.Position = UDim2.new(0.3, 0, 0, 0)
statusValue.BackgroundTransparency = 1
statusValue.Font = Enum.Font.GothamBold
statusValue.Text = "Ready"
statusValue.TextColor3 = C_TEXT_DIM
statusValue.TextSize = 14
statusValue.TextXAlignment = Enum.TextXAlignment.Right
statusValue.Parent = statusFrame

local pollenLabel = Instance.new("TextLabel")
pollenLabel.Name = "PollenLabel"
pollenLabel.Size = UDim2.new(1, 0, 0, 15)
pollenLabel.BackgroundTransparency = 1
pollenLabel.Font = Enum.Font.GothamMedium
pollenLabel.Text = "Pollen: 0 / 0"
pollenLabel.TextColor3 = C_TEXT_LIGHT
pollenLabel.TextSize = 14
pollenLabel.TextXAlignment = Enum.TextXAlignment.Left
pollenLabel.Parent = statusGroup

local pollenBarBG = Instance.new("Frame")
pollenBarBG.Name = "PollenBarBG"
pollenBarBG.Size = UDim2.new(1, 0, 0, 12)
pollenBarBG.BackgroundColor3 = C_DARK_BG
pollenBarBG.BackgroundTransparency = 0.01
pollenBarBG.Parent = statusGroup

local barUc = Instance.new("UICorner")
barUc.CornerRadius = UDim.new(0, 6)
barUc.Parent = pollenBarBG

local pollenBarFG = Instance.new("Frame")
pollenBarFG.Name = "PollenBarFG"
pollenBarFG.Size = UDim2.new(0, 0, 1, 0)
pollenBarFG.BackgroundColor3 = C_ACCENT
pollenBarFG.BackgroundTransparency = 0.01
pollenBarFG.Parent = pollenBarBG

local barFgUc = Instance.new("UICorner")
barFgUc.CornerRadius = UDim.new(0, 6)
barFgUc.Parent = pollenBarFG

local separator = Instance.new("Frame")
separator.Size = UDim2.new(1, 0, 0, 2)
separator.BackgroundColor3 = C_SEPARATOR
separator.BackgroundTransparency = 0.01
separator.Parent = page1_Farm

local settingsGroup = Instance.new("Frame")
settingsGroup.Name = "SettingsGroup"
settingsGroup.Size = UDim2.new(1, 0, 0, 65)
settingsGroup.BackgroundColor3 = C_SECONDARY_BG
settingsGroup.BackgroundTransparency = 0.01
settingsGroup.Parent = page1_Farm

local settingsGroupUc = Instance.new("UICorner")
settingsGroupUc.CornerRadius = UDim.new(0, 8)
settingsGroupUc.Parent = settingsGroup

local settingsGroupPadd = Instance.new("UIPadding")
settingsGroupPadd.PaddingTop = UDim.new(0, 8)
settingsGroupPadd.PaddingBottom = UDim.new(0, 8)
settingsGroupPadd.PaddingLeft = UDim.new(0, 10)
settingsGroupPadd.PaddingRight = UDim.new(0, 10)
settingsGroupPadd.Parent = settingsGroup

local settingsGroupLayout = Instance.new("UIListLayout")
settingsGroupLayout.Padding = UDim.new(0, 5)
settingsGroupLayout.SortOrder = Enum.SortOrder.LayoutOrder
settingsGroupLayout.Parent = settingsGroup

local fieldLabel = Instance.new("TextLabel")
fieldLabel.Name = "FieldLabel"
fieldLabel.Size = UDim2.new(1, 0, 0, 15)
fieldLabel.BackgroundTransparency = 1
fieldLabel.Font = Enum.Font.GothamSemibold
fieldLabel.Text = "SELECT FIELD"
fieldLabel.TextColor3 = C_TEXT_DIM
fieldLabel.TextSize = 14
fieldLabel.TextXAlignment = Enum.TextXAlignment.Left
fieldLabel.Parent = settingsGroup

local dropBtn = Instance.new("TextButton")
dropBtn.Name = "DropBtn"
dropBtn.Size = UDim2.new(1, 0, 0, 35)
dropBtn.BackgroundColor3 = C_DARK_BG
dropBtn.BackgroundTransparency = 0.01
dropBtn.AutoButtonColor = false
dropBtn.Font = Enum.Font.GothamMedium
dropBtn.Text = autofarmField
dropBtn.TextColor3 = C_TEXT_LIGHT
dropBtn.TextSize = 15
dropBtn.TextXAlignment = Enum.TextXAlignment.Left
dropBtn.Parent = settingsGroup

local dropPadd = Instance.new("UIPadding")
dropPadd.PaddingLeft = UDim.new(0, 10)
dropPadd.Parent = dropBtn

local dropUc = Instance.new("UICorner")
dropUc.CornerRadius = UDim.new(0, 8)
dropUc.Parent = dropBtn

local arrow = Instance.new("TextLabel")
arrow.Name = "Arrow"
arrow.Size = UDim2.new(0, 20, 0, 20)
arrow.Position = UDim2.new(1, -25, 0.5, -10)
arrow.BackgroundTransparency = 1
arrow.Font = Enum.Font.GothamBold
arrow.Text = "▼"
arrow.TextColor3 = C_ACCENT
arrow.TextSize = 12
arrow.Parent = dropBtn

local dropdownFrame = Instance.new("Frame")
dropdownFrame.Name = "DropdownFrame"
dropdownFrame.Size = UDim2.new(0, 340, 0, 150)
dropdownFrame.Position = UDim2.new(0, 0, 1, 5)
dropdownFrame.BackgroundColor3 = C_DARK_BG
dropdownFrame.BackgroundTransparency = 0.01
dropdownFrame.Visible = false
dropdownFrame.ZIndex = 3
dropdownFrame.Parent = dropBtn

local dropdownUc = Instance.new("UICorner")
dropdownUc.CornerRadius = UDim.new(0, 8)
dropdownUc.Parent = dropdownFrame

local dropdownUs = Instance.new("UIStroke")
dropdownUs.Color = Color3.fromRGB(60, 60, 65)
dropdownUs.Thickness = 1
dropdownUs.Parent = dropdownFrame

local dropdownList = Instance.new("UIListLayout")
dropdownList.Padding = UDim.new(0, 5)
dropdownList.SortOrder = Enum.SortOrder.LayoutOrder
dropdownList.Parent = dropdownFrame

local dropdownPadd = Instance.new("UIPadding")
dropdownPadd.PaddingTop = UDim.new(0, 5)
dropdownPadd.PaddingBottom = UDim.new(0, 5)
dropdownPadd.PaddingLeft = UDim.new(0, 5)
dropdownPadd.PaddingRight = UDim.new(0, 5)
dropdownPadd.Parent = dropdownFrame

local dropdownScroll = Instance.new("ScrollingFrame")
dropdownScroll.Size = UDim2.new(1, 0, 1, 0)
dropdownScroll.BackgroundTransparency = 1
dropdownScroll.ScrollBarThickness = 4
dropdownScroll.ScrollBarImageColor3 = C_ACCENT
dropdownScroll.CanvasSize = UDim2.new(0, 0, 0, #flowerFields * 35)
dropdownScroll.Parent = dropdownFrame

local scrollList = Instance.new("UIListLayout")
scrollList.Padding = UDim.new(0, 5)
scrollList.SortOrder = Enum.SortOrder.LayoutOrder
scrollList.Parent = dropdownScroll

for _, field in pairs(flowerFields) do
    local fieldBtn = Instance.new("TextButton")
    fieldBtn.Size = UDim2.new(1, -10, 0, 30)
    fieldBtn.BackgroundColor3 = C_SECONDARY_BG
    fieldBtn.BackgroundTransparency = 0.01
    fieldBtn.Font = Enum.Font.GothamMedium
    fieldBtn.Text = field
    fieldBtn.TextColor3 = C_TEXT_LIGHT
    fieldBtn.TextSize = 14
    fieldBtn.TextXAlignment = Enum.TextXAlignment.Left
    fieldBtn.Parent = dropdownScroll
    
    local fieldUc = Instance.new("UICorner")
    fieldUc.CornerRadius = UDim.new(0, 6)
    fieldUc.Parent = fieldBtn
    
    local fieldPadd = Instance.new("UIPadding")
    fieldPadd.PaddingLeft = UDim.new(0, 10)
    fieldPadd.Parent = fieldBtn
    
    fieldBtn.MouseButton1Click:Connect(function()
        autofarmField = field
        dropBtn.Text = field
        dropdownFrame.Visible = false
        arrow.Text = "▼"
    end)
end

local page2_Info = createPage()
page2_Info.Name = "InfoPage"
local tab2_Info = createTabButton("Info")

local infoTitle = Instance.new("TextLabel")
infoTitle.Size = UDim2.new(1, 0, 0, 20)
infoTitle.BackgroundTransparency = 1
infoTitle.Font = Enum.Font.GothamBlack
infoTitle.Text = "ACTIVE FEATURES"
infoTitle.TextColor3 = C_TEXT_LIGHT
infoTitle.TextSize = 16
infoTitle.TextXAlignment = Enum.TextXAlignment.Left
infoTitle.Parent = page2_Info

local function createFeatureInfo(name)
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 0, 20)
    label.BackgroundTransparency = 1
    label.Font = Enum.Font.GothamMedium
    label.Text = "• " .. name .. " (Enabled)"
    label.TextColor3 = C_TEXT_DIM
    label.TextSize = 14
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = page2_Info
end
createFeatureInfo("Anti-AFK System")
createFeatureInfo("Auto-Convert")
createFeatureInfo("Auto-Respawn")
createFeatureInfo("Auto-Tool")

local credits = Instance.new("TextLabel")
credits.Size = UDim2.new(1, 0, 0, 20)
credits.Position = UDim2.new(0, 0, 1, -20)
credits.BackgroundTransparency = 1
credits.Font = Enum.Font.GothamMedium
credits.Text = "Script by BSS Community | Version 1.0 | BSS Auto Farm"
credits.TextColor3 = C_TEXT_DIM
credits.TextSize = 14
credits.TextXAlignment = Enum.TextXAlignment.Left
credits.Parent = page2_Info

for _, btn in pairs(allTabButtons) do
    btn.MouseButton1Click:Connect(function()
        switchTab(btn)
    end)
end

local isMinimized = false
minimizeBtn.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized
    contentWrapper.Visible = not isMinimized
    mainFrame.Size = isMinimized and UDim2.new(0, 500, 0, 40) or UDim2.new(0, 500, 0, 320)
    minimizeBtn.Text = isMinimized and "+" or "−"
end)

closeBtn.MouseButton1Click:Connect(function()
    sg:Destroy()
    autofarmVar = false
    autoTool = false
    if afkConnection then
        afkConnection:Disconnect()
    end
end)

mainStartBtn.MouseButton1Click:Connect(function()
    if not autofarmVar then
        mainStartBtn.Text = "STOP FARMING"
        mainStartBtn.BackgroundColor3 = C_RED
        statusValue.Text = "Farming"
        statusValue.TextColor3 = C_GREEN
        task.spawn(farm)
    else
        autofarmVar = false
        autoTool = false
        mainStartBtn.Text = "START FARMING"
        mainStartBtn.BackgroundColor3 = C_ACCENT
        statusValue.Text = "Ready"
        statusValue.TextColor3 = C_TEXT_DIM
    end
end)

dropBtn.MouseButton1Click:Connect(function()
    dropdownFrame.Visible = not dropdownFrame.Visible
    arrow.Text = dropdownFrame.Visible and "▲" or "▼"
end)

UserInputService.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 and dropdownFrame.Visible then
        local mousePos = input.Position
        local guiInset = GuiService:GetGuiInset()
        local absPos = dropdownFrame.AbsolutePosition + guiInset
        local absSize = dropdownFrame.AbsoluteSize
        if mousePos.X < absPos.X or mousePos.X > absPos.X + absSize.X or
           mousePos.Y < absPos.Y or mousePos.Y > absPos.Y + absSize.Y then
            dropdownFrame.Visible = false
            arrow.Text = "▼"
        end
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement and mainFrame.Active then
        local newPos = mainFrame.Position
        dropdownFrame.Position = UDim2.new(0, 0, 1, 5)
    end
end)

coreStats.Pollen.Changed:Connect(function(newPollen)
    local cap = coreStats.Capacity.Value
    local pollenText = "Pollen: " .. math.floor(newPollen) .. " / " .. math.floor(cap)
    pollenLabel.Text = pollenText
    local ratio = cap > 0 and newPollen / cap or 0
    pollenBarFG.Size = UDim2.new(math.clamp(ratio, 0, 1), 0, 1, 0)
end)

coreStats.Capacity.Changed:Connect(function(newCap)
    local pollenText = "Pollen: " .. math.floor(coreStats.Pollen.Value) .. " / " .. math.floor(newCap)
    pollenLabel.Text = pollenText
    local ratio = newCap > 0 and coreStats.Pollen.Value / newCap or 0
    pollenBarFG.Size = UDim2.new(math.clamp(ratio, 0, 1), 0, 1, 0)
end)
 